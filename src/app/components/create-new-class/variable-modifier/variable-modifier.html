<div class="variable-modifier-container">
  <!-- Variable Definition Rows -->
  <div *ngFor="let variableDef of variableConfigDefs" class="variable-row">
    <mat-grid-list cols="5" rowHeight="85px">
      <!-- Variable Name -->
      <mat-grid-tile>
        <mat-form-field appearance="outline">
          <mat-label>Variable Name</mat-label>
          <input type="text" matInput [formControl]="variableDef.varNameControl" [(ngModel)]="variableDef.varName" placeholder="e.g., userName">
        </mat-form-field>
      </mat-grid-tile>

      <!-- Variable Display Name -->
      <mat-grid-tile>
        <mat-form-field appearance="outline">
          <mat-label>Display Name</mat-label>
          <input type="text" matInput [formControl]="variableDef.varDisplayNameControl" [(ngModel)]="variableDef.varDisplayName" placeholder="e.g., User Name">
        </mat-form-field>
      </mat-grid-tile>

      <!-- Variable Type -->
      <mat-grid-tile>
        <mat-form-field appearance="outline">
          <mat-label>Type</mat-label>
          <mat-select [(ngModel)]="variableDef.varType">
            <mat-option *ngFor="let type of typesAllowed" [value]="type" (click)="setType(variableDef.varIndex, type)">
              {{type}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>

      <!-- Reference Class (conditional) -->
      <mat-grid-tile *ngIf="variableDef.varType == 'Reference'">
        <mat-form-field appearance="outline">
          <mat-label>Referenced Class</mat-label>
          <mat-select [(ngModel)]="variableDef.varRefClass">
            <mat-option value="class1">Class 1</mat-option>
            <mat-option value="class2">Class 2</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-grid-tile>

      <!-- Spacer for non-reference types -->
      <mat-grid-tile *ngIf="variableDef.varType != 'Reference'">
      </mat-grid-tile>

      <!-- Remove Button -->
      <mat-grid-tile>
        <button mat-raised-button class="remove-var-btn" (click)="removeVariable(variableDef.varIndex)" *ngIf="variableDef.varIndex != 1">
          Remove
        </button>
      </mat-grid-tile>
    </mat-grid-list>
  </div>

  <!-- Empty State -->
  <div class="no-variables" *ngIf="!variableConfigDefs || variableConfigDefs.length === 0">
    <p>No variables defined yet. Click "Add Variable" to get started.</p>
  </div>

  <!-- Add Variable Button -->
  <button id="new_variable_btn" mat-raised-button (click)="addVariableDef()">
    Add Variable
  </button>
</div>